# Handoff: C06-09

Created: 2026-01-18T12:28:01.907708Z

Spec: .plans/C06-09.md


## 2026-01-18T12:31:19.331069Z — claude — impl

Command:
```
claude -p --output-format json --model opus --permission-mode acceptEdits --dangerously-skip-permissions You are implementing task C06-09 in this git repository.

1) Read the spec: .plans/C06-09.md
2) Read handoff/context: .t2/handoff/C06-09.md

Implement the spec fully.

Verification commands (run if non-empty):
- format: 
- lint: npm run lint
- test: npm test

In your final response, include:
- Status: DONE or NEEDS-REVIEW
- Summary of changes
- How to verify (exact commands)
- Risks / follow-ups

```

Return code: 0

Session: 1da60b0b-52f4-4dc3-88e2-bcc3b83a7f82

Agent final message (file: C06-09.claude.impl.last.md):

The implementation is complete. Let me provide the summary.

---

**Status: DONE**

## Summary of Changes

### 1. Created `scripts/check-autoload-sanity.php`
A PHP script that verifies key plugin classes can be autoloaded correctly. This script:
- Sets up WordPress stubs (constants and core class stubs) to allow class loading without a full WordPress environment
- Checks 54 key classes including:
  - Plugin class
  - Container classes
  - All 13 service providers
  - Key domain classes (Installer, Multisite, Assets, Database, Settings, etc.)
  - Integration classes
  - Scheduler classes
  - REST controllers
  - Application layer use cases
  - Admin classes
  - Exception classes
  - Contracts/Interfaces
- Exits with code 0 on success, 1 on failure
- Provides clear output with colored checkmarks/X marks for each class
- Includes helpful error messages when failures occur

### 2. Updated `.github/workflows/ci.yml`
Added a new CI job `autoload-sanity` that:
- Runs on `ubuntu-latest` (Linux, case-sensitive filesystem)
- Sets up PHP 7.4
- Executes the autoload sanity check script
- Fails the build if any classes cannot be loaded

## How to Verify

```bash
# Run the autoload sanity check locally
php scripts/check-autoload-sanity.php

# Run linting (should pass with only warnings)
npm run lint

# Run tests (should pass)
npm test
```

## Risks / Follow-ups

1. **WordPress Stubs**: The script uses minimal stubs for WordPress core classes (`WP_REST_Controller`, `WP_REST_Request`, `WP_REST_Response`, `WP_Error`, `WP_Admin_Bar`). If new plugin classes extend other WordPress core classes, the stubs may need to be expanded.

2. **Class List Maintenance**: If new key classes are added to the plugin, they should be added to the `get_classes_to_verify()` function in the script to ensure they're also checked.

3. **CI Job Order**: The autoload-sanity job runs independently without dependencies. If casing issues are detected, the job will fail early before other expensive jobs run.


Repo snapshot:
```
branch: main

status:
MM .github/workflows/ci.yml
A  .logs/C01-01.claude.impl.last.md
A  .logs/C01-01.claude.impl.raw.txt
A  .logs/C01-01.gitcommit.txt
A  .logs/C01-02.claude.impl.last.md
A  .logs/C01-02.claude.impl.raw.txt
A  .logs/C01-02.gitcommit.txt
A  .logs/C01-03.claude.impl.last.md
A  .logs/C01-03.claude.impl.raw.txt
A  .logs/C01-03.gitcommit.txt
A  .logs/C01-04.claude.impl.last.md
A  .logs/C01-04.claude.impl.raw.txt
A  .logs/C01-04.gitcommit.txt
A  .logs/C01-05.claude.impl.last.md
A  .logs/C01-05.claude.impl.raw.txt
A  .logs/C01-05.gitcommit.txt
A  .logs/C01-06.claude.impl.last.md
A  .logs/C01-06.claude.impl.raw.txt
A  .logs/C01-06.gitcommit.txt
A  .logs/C01-07.claude.impl.last.md
A  .logs/C01-07.claude.impl.raw.txt
A  .logs/C01-07.gitcommit.txt
A  .logs/C01-08.claude.impl.last.md
A  .logs/C01-08.claude.impl.raw.txt
A  .logs/C01-08.gitcommit.txt
A  .logs/C01-09.claude.impl.last.md
A  .logs/C01-09.claude.impl.raw.txt
A  .logs/C01-09.gitcommit.txt
A  .logs/C01-10.claude.impl.last.md
A  .logs/C01-10.claude.impl.raw.txt
A  .logs/C01-10.gitcommit.txt
A  .logs/C01-11.claude.impl.last.md
A  .logs/C01-11.claude.impl.raw.txt
A  .logs/C01-11.gitcommit.txt
A  .logs/C01-12.claude.impl.last.md
A  .logs/C01-12.claude.impl.raw.txt
A  .logs/C01-12.gitcommit.txt
A  .logs/C02-01.claude.impl.last.md
A  .logs/C02-01.claude.impl.raw.txt
A  .logs/C02-01.gitcommit.txt
A  .logs/C02-02.claude.impl.last.md
A  .logs/C02-02.claude.impl.raw.txt
A  .logs/C02-02.gitcommit.txt
A  .logs/C02-03.claude.impl.last.md
A  .logs/C02-03.claude.impl.raw.txt
A  .logs/C02-03.gitcommit.txt
A  .logs/C02-04.claude.impl.last.md
A  .logs/C02-04.claude.impl.raw.txt
A  .logs/C02-04.gitcommit.txt
A  .logs/C02-05.claude.impl.last.md
A  .logs/C02-05.claude.impl.raw.txt
A  .logs/C02-05.gitcommit.txt
A  .logs/C02-06.claude.impl.last.md
A  .logs/C02-06.claude.impl.raw.txt
A  .logs/C02-06.gitcommit.txt
A  .logs/C02-07.claude.impl.last.md
A  .logs/C02-07.claude.impl.raw.txt
A  .logs/C02-07.gitcommit.txt
A  .logs/C02-08.claude.impl.last.md
A  .logs/C02-08.claude.impl.raw.txt
A  .logs/C02-08.gitcommit.txt
A  .logs/C02-09.claude.impl.last.md
A  .logs/C02-09.claude.impl.raw.txt
A  .logs/C02-09.gitcommit.txt
A  .logs/C03-01.claude.impl.last.md
A  .logs/C03-01.claude.impl.raw.txt
A  .logs/C03-01.gitcommit.txt
A  .logs/C03-02.claude.impl.last.md
A  .logs/C03-02.claude.impl.raw.txt
A  .logs/C03-02.gitcommit.txt
A  .logs/C03-03.claude.impl.last.md
A  .logs/C03-03.claude.impl.raw.txt
A  .logs/C03-03.gitcommit.txt
A  .logs/C03-04.claude.impl.last.md
A  .logs/C03-04.claude.impl.raw.txt
A  .logs/C03-04.gitcommit.txt
A  .logs/C03-05.claude.impl.last.md
A  .logs/C03-05.claude.impl.raw.txt
A  .logs/C03-05.gitcommit.txt
A  .logs/C03-06.claude.impl.last.md
A  .logs/C03-06.claude.impl.raw.txt
A  .logs/C03-06.gitcommit.txt
A  .logs/C03-07.claude.impl.last.md
A  .logs/C03-07.claude.impl.raw.txt
A  .logs/C03-07.gitcommit.txt
A  .logs/C03-08.claude.impl.last.md
A  .logs/C03-08.claude.impl.raw.txt
A  .logs/C03-08.gitcommit.txt
A  .logs/C03-09.claude.impl.last.md
A  .logs/C03-09.claude.impl.raw.txt
A  .logs/C03-09.gitcommit.txt
A  .logs/C03-10.claude.impl.last.md
A  .logs/C03-10.claude.impl.raw.txt
A  .logs/C03-10.gitcommit.txt
A  .logs/C04-01.claude.impl.last.md
A  .logs/C04-01.claude.impl.raw.txt
A  .logs/C04-01.gitcommit.txt
A  .logs/C04-02.claude.impl.last.md
A  .logs/C04-02.claude.impl.raw.txt
A  .logs/C04-02.gitcommit.txt
A  .logs/C04-03.claude.impl.last.md
A  .logs/C04-03.claude.impl.raw.txt
A  .logs/C04-03.gitcommit.txt
A  .logs/C04-04.claude.impl.last.md
A  .logs/C04-04.claude.impl.raw.txt
A  .logs/C04-04.gitcommit.txt
A  .logs/C04-05.claude.impl.last.md
A  .logs/C04-05.claude.impl.raw.txt
A  .logs/C04-05.gitcommit.txt
A  .logs/C04-06.claude.impl.last.md
A  .logs/C04-06.claude.impl.raw.txt
A  .logs/C04-06.gitcommit.txt
A  .logs/C05-01.claude.impl.last.md
A  .logs/C05-01.claude.impl.raw.txt
A  .logs/C05-01.gitcommit.txt
A  .logs/C05-02.claude.impl.last.md
A  .logs/C05-02.claude.impl.raw.txt
A  .logs/C05-02.gitcommit.txt
A  .logs/C05-03.claude.impl.last.md
A  .logs/C05-03.claude.impl.raw.txt
A  .logs/C05-03.gitcommit.txt
A  .logs/C05-04.claude.impl.last.md
A  .logs/C05-04.claude.impl.raw.txt
A  .logs/C05-04.gitcommit.txt
A  .logs/C05-05.claude.impl.last.md
A  .logs/C05-05.claude.impl.raw.txt
A  .logs/C05-05.gitcommit.txt
A  .logs/C05-06.claude.impl.last.md
A  .logs/C05-06.claude.impl.raw.txt
A  .logs/C05-06.gitcommit.txt
A  .logs/C06-01.claude.impl.last.md
A  .logs/C06-01.claude.impl.raw.txt
A  .logs/C06-01.gitcommit.txt
A  .logs/C06-02.claude.impl.last.md
A  .logs/C06-02.claude.impl.raw.txt
A  .logs/C06-02.gitcommit.txt
A  .logs/C06-03.claude.impl.last.md
A  .logs/C06-03.claude.impl.raw.txt
A  .logs/C06-03.gitcommit.txt
A  .logs/C06-04.claude.impl.last.md
A  .logs/C06-04.claude.impl.raw.txt
A  .logs/C06-04.gitcommit.txt
A  .logs/C06-05.claude.impl.last.md
A  .logs/C06-05.claude.impl.raw.txt
A  .logs/C06-05.gitcommit.txt
A  .logs/C06-06.claude.impl.last.md
A  .logs/C06-06.claude.impl.raw.txt
A  .logs/C06-06.gitcommit.txt
A  .logs/C06-07.claude.impl.last.md
A  .logs/C06-07.claude.impl.raw.txt
A  .logs/C06-07.gitcommit.txt
A  .logs/C06-08.claude.impl.last.md
A  .logs/C06-08.claude.impl.raw.txt
A  .plans/C01-01.md
A  .plans/C01-02.md
A  .plans/C01-03.md
A  .plans/C01-04.md
A  .plans/C01-05.md
A  .plans/C01-06.md
A  .plans/C01-07.md
A  .plans/C01-08.md
A  .plans/C01-09.md
A  .plans/C01-10.md
A  .plans/C01-11.md
A  .plans/C01-12.md
A  .plans/C02-01.md
A  .plans/C02-02.md
A  .plans/C02-03.md
A  .plans/C02-04.md
A  .plans/C02-05.md
A  .plans/C02-06.md
A  .plans/C02-07.md
A  .plans/C02-08.md
A  .plans/C02-09.md
A  .plans/C03-01.md
A  .plans/C03-02.md
A  .plans/C03-03.md
A  .plans/C03-04.md
A  .plans/C03-05.md
A  .plans/C03-06.md
A  .plans/C03-07.md
A  .plans/C03-08.md
A  .plans/C03-09.md
A  .plans/C03-10.md
A  .plans/C04-01.md
A  .plans/C04-02.md
A  .plans/C04-03.md
A  .plans/C04-04.md
A  .plans/C04-05.md
A  .plans/C04-06.md
A  .plans/C05-01.md
A  .plans/C05-02.md
A  .plans/C05-03.md
A  .plans/C05-04.md
A  .plans/C05-05.md
A  .plans/C05-06.md
A  .plans/C06-01.md
A  .plans/C06-02.md
A  .plans/C06-03.md
A  .plans/C06-04.md
A  .plans/C06-05.md
A  .plans/C06-06.md
A  .plans/C06-07.md
A  .plans/C06-08.md
A  .t2/handoff/C01-01.md
A  .t2/handoff/C01-02.md
A  .t2/handoff/C01-03.md
A  .t2/handoff/C01-04.md
A  .t2/handoff/C01-05.md
A  .t2/handoff/C01-06.md
A  .t2/handoff/C01-07.md
A  .t2/handoff/C01-08.md
A  .t2/handoff/C01-09.md
A  .t2/handoff/C01-10.md
A  .t2/handoff/C01-11.md
A  .t2/handoff/C01-12.md
A  .t2/handoff/C02-01.md
A  .t2/handoff/C02-02.md
A  .t2/handoff/C02-03.md
A  .t2/handoff/C02-04.md
A  .t2/handoff/C02-05.md
A  .t2/handoff/C02-06.md
A  .t2/handoff/C02-07.md
A  .t2/handoff/C02-08.md
A  .t2/handoff/C02-09.md
A  .t2/handoff/C03-01.md
A  .t2/handoff/C03-02.md
A  .t2/handoff/C03-03.md
A  .t2/handoff/C03-04.md
A  .t2/handoff/C03-05.md
A  .t2/handoff/C03-06.md
A  .t2/handoff/C03-07.md
A  .t2/handoff/C03-08.md
A  .t2/handoff/C03-09.md
A  .t2/handoff/C03-10.md
A  .t2/handoff/C04-01.md
A  .t2/handoff/C04-02.md
A  .t2/handoff/C04-03.md
A  .t2/handoff/C04-04.md
A  .t2/handoff/C04-05.md
A  .t2/handoff/C04-06.md
A  .t2/handoff/C05-01.md
A  .t2/handoff/C05-02.md
A  .t2/handoff/C05-03.md
A  .t2/handoff/C05-04.md
A  .t2/handoff/C05-05.md
A  .t2/handoff/C05-06.md
A  .t2/handoff/C06-01.md
A  .t2/handoff/C06-02.md
A  .t2/handoff/C06-03.md
A  .t2/handoff/C06-04.md
A  .t2/handoff/C06-05.md
A  .t2/handoff/C06-06.md
A  .t2/handoff/C06-07.md
A  .t2/handoff/C06-08.md
MM .t2/state.json
M  CHANGELOG.md
M  README.md
M  TESTING.md
D  admin/Admin.php
M  assets/js/admin.js
M  assets/js/components/ActivityTimeline.jsx
M  assets/js/components/ActivityTimeline.test.jsx
M  assets/js/components/Recommendations.jsx
M  assets/js/components/Recommendations.test.jsx
M  assets/js/database-health.js
M  assets/js/entries/dashboard.js
M  assets/js/entries/dashboard.test.js
M  assets/js/entries/database-health.js
M  assets/js/entries/database-health.test.js
M  assets/js/entries/media-audit.js
M  assets/js/entries/media-audit.test.js
M  assets/js/entries/performance.js
M  assets/js/entries/performance.test.js
M  assets/js/entries/settings.js
M  assets/js/entries/settings.test.js
M  assets/js/media-audit.js
M  assets/js/performance.js
M  assets/js/utils/api.js
M  assets/js/utils/api.test.js
A  assets/js/utils/extension-api.js
A  assets/js/utils/extension-api.test.js
M  composer.json
A  docs/architecture-improvement-plan.md
A  docs/decisions/ADR-001-code-organization.md
A  docs/decisions/ADR-002-rest-api-evolution.md
A  docs/decisions/ADR-003-frontend-modernization-scope.md
A  docs/developers/application-layer.md
A  docs/developers/case-sensitivity.md
A  docs/developers/container.md
A  docs/developers/edge-adapters.md
A  docs/developers/frontend-config.md
M  docs/developers/hooks.md
M  docs/developers/rest-api.md
M  docs/getting-started.md
D  includes/Admin.php
A  includes/Admin/MenuRegistrar.php
A  includes/Admin/PageRenderer.php
A  includes/Admin/SettingsViewModel.php
A  includes/Admin/index.php
A  includes/Application/AI/GenerateRecommendations.php
A  includes/Application/AI/index.php
A  includes/Application/Database/RunCleanup.php
A  includes/Application/Database/RunOptimization.php
A  includes/Application/Database/index.php
A  includes/Application/Media/ProcessDuplicates.php
A  includes/Application/Media/RunScan.php
A  includes/Application/Media/index.php
A  includes/Application/Performance/CollectMetrics.php
A  includes/Application/Performance/RunHealthCheck.php
A  includes/Application/Performance/index.php
A  includes/Application/index.php
M  includes/Assets.php
M  includes/BatchProcessor.php
A  includes/Contracts/IntegrationFactoryInterface.php
M  includes/Database.php
M  includes/Database/Tasks/DatabaseCleanupTask.php
A  includes/Exceptions/NotFoundException.php
A  includes/Exceptions/index.php
M  includes/Installer.php
A  includes/Integrations/ACF.php
M  includes/Integrations/AbstractIntegration.php
M  includes/Integrations/Acf.php
M  includes/Integrations/Elementor.php
A  includes/Integrations/IntegrationFactory.php
M  includes/Integrations/IntegrationManager.php
M  includes/Integrations/Multilingual.php
M  includes/Integrations/WooCommerce.php
M  includes/Media/Exclusions.php
M  includes/Media/Tasks/MediaScanTask.php
M  includes/Performance/HeartbeatController.php
M  includes/Performance/Tasks/PerformanceCheckTask.php
M  includes/Providers/AIServiceProvider.php
M  includes/Providers/BootstrapServiceProvider.php
M  includes/Providers/DatabaseServiceProvider.php
M  includes/Providers/IntegrationServiceProvider.php
M  includes/Providers/RESTServiceProvider.php
M  includes/Providers/SchedulerServiceProvider.php
M  includes/REST/ActivityController.php
M  includes/REST/DashboardController.php
M  includes/REST/Database/CleanupController.php
M  includes/REST/Database/OptimizationController.php
D  includes/REST/DatabaseController.php
M  includes/REST/Media/MediaCleanupController.php
M  includes/REST/Media/MediaScanController.php
D  includes/REST/MediaController.php
M  includes/REST/Performance/PerformanceStatsController.php
D  includes/REST/PerformanceController.php
M  includes/REST/RestController.php
M  includes/RestApi.php
M  includes/Scheduler/AbstractScheduledTask.php
A  includes/Scheduler/Contracts/SchedulingServiceInterface.php
A  includes/Scheduler/ProgressStore.php
A  includes/Scheduler/SchedulingService.php
A  includes/Scheduler/TaskActivityLogger.php
A  includes/Scheduler/TaskObservabilityService.php
A  includes/Scheduler/TaskResult.php
M  includes/Settings.php
M  includes/Settings/Domain/AdvancedSettings.php
M  includes/Settings/SettingsServiceProvider.php
M  jest.setup.js
A  plan_tasks.csv
D  review_tasks.csv
A  scripts/check-case-sensitivity.sh
A  scripts/check-forbidden-patterns.sh
D  tasks.csv
M  templates/admin/dashboard.php
M  templates/admin/database-health.php
M  templates/admin/media-audit.php
M  templates/admin/performance.php
M  templates/admin/settings.php
M  templates/network/network-dashboard.php
M  templates/network/network-database.php
M  templates/network/network-settings.php
A  tests/Mocks/MockCache.php
M  tests/Mocks/MockConnection.php
A  tests/Mocks/MockMultilingual.php
M  tests/bootstrap-standalone.php
M  tests/integration/RestApiTest.php
A  tests/unit-standalone/Application/ApplicationLayerTest.php
A  tests/unit-standalone/Application/Database/RunCleanupTest.php
A  tests/unit-standalone/Database/OrphanedTablesTest.php
A  tests/unit-standalone/Database/Tasks/DatabaseCleanupTaskSafeModeTest.php
A  tests/unit-standalone/Database/TrashCleanerTest.php
A  tests/unit-standalone/Exceptions/ExceptionsTest.php
M  tests/unit-standalone/Media/AltTextCheckerTest.php
A  tests/unit-standalone/Media/DuplicateDetectorTest.php
A  tests/unit-standalone/Performance/AjaxMonitorTest.php
A  tests/unit-standalone/Performance/AutoloadAnalyzerTest.php
A  tests/unit-standalone/Performance/CacheCheckerTest.php
A  tests/unit-standalone/Performance/HeartbeatControllerTest.php
A  tests/unit-standalone/Performance/PluginProfilerTest.php
A  tests/unit-standalone/Performance/QueryMonitorTest.php
A  tests/unit-standalone/Providers/ProviderContractTest.php
A  tests/unit-standalone/Scheduler/ProgressStoreTest.php
A  tests/unit-standalone/Scheduler/SchedulingServiceTest.php
A  tests/unit-standalone/Scheduler/TaskResultTest.php
M  tests/unit/Integration/IntegrationManagerTest.php
M  wp-admin-health-suite.php
?? .logs/C06-08.gitcommit.txt
?? .logs/C06-09.claude.impl.last.md
?? .logs/C06-09.claude.impl.raw.txt
?? .plans/C06-09.md
?? .t2/handoff/C06-09.md
?? scripts/check-autoload-sanity.php

diff --stat:
.github/workflows/ci.yml | 17 +++++++++++++++++
 .t2/state.json           |  5 +++--
 2 files changed, 20 insertions(+), 2 deletions(-)

```
