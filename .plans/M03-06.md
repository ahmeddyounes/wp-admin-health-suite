# M03-06 â€” Safe Media Deletion System

Create /includes/media/class-safe-delete.php. Methods: prepare_deletion(attachment_ids), execute_deletion(deletion_id), restore_deleted(deletion_id), get_deletion_queue(), get_deleted_history(). Workflow: 1) User selects items, 2) prepare_deletion moves files to /wp-content/wpha-trash/ and stores metadata, 3) Items recoverable for 30 days, 4) execute_deletion permanently removes after confirmation. Store in custom table: wpha_deleted_media (id, attachment_id, file_path, metadata JSON, deleted_at, permanent_at). Acceptance: Two-step deletion prevents accidents, restore works perfectly, auto-purge after 30 days.
