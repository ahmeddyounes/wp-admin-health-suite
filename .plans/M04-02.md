# M04-02 â€” Query Monitor Integration

Create /includes/performance/class-query-monitor.php. Methods: capture_slow_queries(threshold_ms), get_query_summary(), get_queries_by_caller(), export_query_log(). If Query Monitor plugin active, integrate with its data. Otherwise, implement basic monitoring: hook into 'query' filter, measure SAVEQUERIES if enabled. Identify: slow queries (>50ms), duplicate queries, queries without indexes (EXPLAIN). Log to custom table with TTL. Acceptance: Works standalone and enhanced with Query Monitor, identifies genuinely slow queries, logs are prunable.
