---

## Status: DONE

## Summary of Changes

Implemented C04-01: Define canonical JS API surface. This task standardized `window.WPAdminHealth.api` as the single supported global REST client and created comprehensive documentation.

### New Files Created

1. **`docs/developers/js-api.md`** - Comprehensive JS API documentation covering:
   - Global namespace structure (`window.WPAdminHealth`)
   - `WPAdminHealth.api` - the canonical REST client with all HTTP methods
   - `WPAdminHealth.ApiError` - structured error handling class
   - `WPAdminHealth.Events` - custom event system
   - `WPAdminHealth.extensions` - extension API for third-party integrations
   - Complete extension development guide with examples
   - Migration guide from direct `wp.apiFetch` usage
   - TypeScript type hints
   - Deprecated APIs section

### Modified Files

1. **`assets/js/entries/settings.js`**
   - Added import of `apiClient` and `ApiError` from `utils/api.js`
   - Added global exposure: `window.WPAdminHealth.api = apiClient`
   - Added global exposure: `window.WPAdminHealth.ApiError = ApiError`

2. **`assets/js/entries/settings.test.js`**
   - Added test coverage for API client exposure
   - Tests verify `window.WPAdminHealth.api` is defined with all HTTP methods
   - Tests verify `window.WPAdminHealth.ApiError` is exposed

## How to Verify

```bash
# Run ESLint (JavaScript)
npm run lint

# Run Jest tests (JavaScript)
npm test

# View the new documentation
cat docs/developers/js-api.md
```

## Risks / Follow-ups

1. **Dual API objects**: `admin.js` still exposes `window.WPAdminHealth.API` (uppercase) in addition to the canonical `window.WPAdminHealth.api` (lowercase). The documentation marks the uppercase version as deprecated. Consider removing it in a future major version.

2. **TypeScript definitions**: The documentation provides inline type hints but no actual `.d.ts` file. Consider adding proper TypeScript definitions in a future task for better developer experience.

3. **API versioning**: The `ExtensionAPI.version` is hardcoded to `"1.0.0"`. Consider syncing this with the plugin version or implementing semantic versioning for the JS API.
