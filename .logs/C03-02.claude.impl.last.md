Based on my analysis, the implementation is complete and all verification commands have passed. Let me provide the final response.

**Status: DONE**

## Summary of Changes

### 1. Implemented `includes/Application/Database/RunCleanup.php`
- Full application service with constructor dependency injection for 7 services:
  - `SettingsInterface` - for safe mode configuration
  - `AnalyzerInterface` - for database analysis
  - `RevisionsManagerInterface` - for revision cleanup
  - `TransientsCleanerInterface` - for transient cleanup
  - `OrphanedCleanerInterface` - for orphaned data cleanup
  - `TrashCleanerInterface` - for trash cleanup
  - `ActivityLoggerInterface` (optional) - for activity logging

- Implemented methods:
  - `execute()` - runs all cleanup types
  - `execute_by_type()` - runs specific cleanup type
  - `clean_revisions()`, `clean_transients()`, `clean_spam()`, `clean_trash()`, `clean_orphaned()` - individual cleanup operations
  - `is_safe_mode_enabled()` - checks safe mode setting

- Safe mode support: when enabled, returns preview results (`would_delete`, `would_free`) without performing actual deletions

- Activity logging: automatically logs cleanup operations when activity logger is available

### 2. Created `tests/unit-standalone/Application/Database/RunCleanupTest.php`
- Comprehensive test suite with 20+ test methods
- Tests all cleanup types with mocked dependencies
- Tests safe mode behavior (preview vs actual deletion)
- Tests activity logging integration
- Tests invalid type handling and edge cases

### 3. Updated `tests/unit-standalone/Application/ApplicationLayerTest.php`
- Changed instantiation tests to class/method existence checks since `RunCleanup` now requires constructor dependencies
- Added tests for `VALID_TYPES` and `VALID_ORPHANED_TYPES` constants

## How to Verify

```bash
# Run linting
npm run lint

# Run all tests
npm test

# Run only the RunCleanup tests
./vendor/bin/phpunit tests/unit-standalone/Application/Database/RunCleanupTest.php

# Run standalone application layer tests
./vendor/bin/phpunit tests/unit-standalone/Application/ApplicationLayerTest.php
```

## Risks / Follow-ups

1. **Container Registration**: The `RunCleanup` service needs to be registered in the DI container and wired up with its dependencies. This is likely handled by a service provider but should be verified.

2. **REST Controller Integration**: The existing `CleanupController` or `DatabaseController` may need to be updated to use this new application service instead of calling domain services directly.

3. **Safe Mode Default**: Currently defaults to checking `$this->settings->get_setting('safe_mode', true)`. Ensure this setting key matches what's configured in the settings system.

4. **Activity Logger Nullable**: The activity logger is optional (nullable) to support standalone testing and cases where logging isn't needed. Production code should ensure it's always injected.
