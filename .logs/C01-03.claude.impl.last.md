---

## Status: DONE

## Summary of Changes

I implemented task C01-03 by making an architectural decision on REST API evolution and fully documenting it:

### Decision Made
**Refactor `wpha/v1` in place** - No `v2` namespace will be introduced. The existing v1 API will be maintained with backward-compatible changes only.

### Files Created/Modified

1. **`docs/decisions/ADR-002-rest-api-evolution.md`** (new)
   - Complete Architecture Decision Record documenting:
     - Decision rationale (internal consumer only, no breaking changes needed)
     - Compatibility rules (additive evolution, stable routes/error codes)
     - Route deprecation strategy (headers, grace period, major version removal)
     - Integration with Phase 2 of architecture improvement plan
     - Examples of acceptable vs breaking changes

2. **`docs/architecture-improvement-plan.md`** (modified)
   - Updated Open Questions section to mark REST evolution as decided
   - Added Section 10 summarizing the REST API evolution strategy

3. **`docs/developers/rest-api.md`** (modified)
   - Added new "API Compatibility" section including:
     - Stability promise
     - Backward compatibility rules table
     - Deprecation process
     - Version support table
     - Code example for checking deprecation headers

## How to Verify

```bash
# Verify lint passes (pre-existing warnings only)
npm run lint

# Verify all tests pass
npm test

# Review the ADR
cat docs/decisions/ADR-002-rest-api-evolution.md

# Review the API compatibility documentation
head -100 docs/developers/rest-api.md
```

## Risks / Follow-ups

1. **Implementation of deprecation headers**: The ADR documents that deprecated routes should return `X-WPHA-Deprecated` headers, but this is not yet implemented in code. This should be added to `RestController.php` when the first route is actually deprecated.

2. **External integrators**: The decision assumes no external API consumers exist. If third-party integrations emerge, the deprecation timeline may need to be extended beyond "1 minor version" to provide more notice.

3. **Phase 2 coordination**: The REST controller refactoring (Phase 2 of the architecture improvement plan) should verify that response contracts remain identical when moving orchestration to Application services.
