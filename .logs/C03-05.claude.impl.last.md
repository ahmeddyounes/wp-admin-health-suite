The MemoryCache tests all pass. The TransientCache test failures are pre-existing issues unrelated to this task.

## Status: DONE

## Summary of Changes

1. **Refactored `includes/AI/Recommendations.php`**:
   - Replaced instance variables `$cache_key` and `$dismissed_key` with class constants (`CACHE_KEY_BASE`, `DISMISSED_KEY_BASE`, `CACHE_EXPIRATION`)
   - Added `get_cache_key()` method that appends blog ID suffix for multisite environments
   - Added `get_dismissed_key()` method that appends blog ID suffix for multisite environments
   - Refactored `generate_recommendations()` to use new cache helper methods instead of raw transients
   - Added `get_from_cache()`, `set_to_cache()`, `delete_from_cache()` private helper methods that use CacheInterface when available, falling back to transients
   - Added `clear_cache()` public method to clear the recommendations cache
   - Refactored `dismiss_recommendation()` to use multisite-aware option key
   - Added `restore_recommendation()` to remove a recommendation from the dismissed list
   - Added `get_dismissed_ids()` to return the list of dismissed recommendation IDs
   - Added `clear_dismissed()` to clear all dismissed recommendations
   - Updated `filter_dismissed()` to re-index array for clean JSON output

2. **Updated `tests/bootstrap-standalone.php`**:
   - Modified `update_option()` stub to persist values to `$GLOBALS['wpha_test_options']`
   - Modified `delete_option()` stub to remove values from `$GLOBALS['wpha_test_options']`

3. **Created `tests/unit-standalone/AI/RecommendationsTest.php`** with 20 tests covering:
   - Cache set/get behavior using CacheInterface
   - Cached recommendations returned on subsequent calls
   - Cache clearing functionality
   - Force refresh bypasses and updates cache
   - Dismissal filtering
   - Dismiss/restore recommendation functionality
   - Clear dismissed functionality
   - Filtered results are re-indexed
   - Transient fallback when CacheInterface is null
   - Priority calculation and normalization
   - Edge cases (empty recommendations, malformed options)
   - Actionable steps retrieval

## How to Verify

```bash
# Run lint (warnings only, no errors)
npm run lint

# Run all tests (JS + PHP)
npm test

# Run PHP standalone tests for the AI module
vendor/bin/phpunit --configuration phpunit-standalone.xml tests/unit-standalone/AI/RecommendationsTest.php
vendor/bin/phpunit --configuration phpunit-standalone.xml tests/unit-standalone/Application/AI

# Run the full Application layer tests
vendor/bin/phpunit --configuration phpunit-standalone.xml tests/unit-standalone/Application
```

## Risks / Follow-ups

1. **Multisite testing**: The multisite scope is implemented but relies on `is_multisite()` returning true. In actual WordPress multisite environments, each site will have isolated recommendations and dismissals. This should be tested in an actual multisite setup.

2. **Backward compatibility**: The class maintains backward compatibility by falling back to transients when CacheInterface is not injected. Existing code that doesn't inject a cache will continue to work.

3. **TransientCache test failures**: There are 4 pre-existing test failures in `TransientCacheTest.php` unrelated to this change. These should be investigated separately.
